<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>ã€ç¬”è®°ã€‘SpringBootå®ç°AOP | ç»¯é çš„åšå®¢ | è¿èœœç»Ÿæ²»ä¸–ç•Œ!!!ğŸ’•</title>

  
  <meta name="author" content="ç»¯é ">
  

  
  <meta name="description" content="æ•æ‰ä¸€åªçˆ±æŠ˜è…¾çš„ç»¯é ">
  

  
  
  <meta name="keywords" content="Java,Spring,SpringBoot,AOP">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="ã€ç¬”è®°ã€‘SpringBootå®ç°AOP"/>

  <meta property="og:site_name" content="ç»¯é çš„åšå®¢"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="ç»¯é çš„åšå®¢" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">ç»¯é çš„åšå®¢</a>
    </h1>
    <p class="site-description">è¿èœœç»Ÿæ²»ä¸–ç•Œ!!!ğŸ’•</p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">ä¸»é¡µ</a></li>
      
        <li><a href="/about/">å…³äº</a></li>
      
        <li><a href="/tags/">æ ‡ç­¾</a></li>
      
        <li><a href="/categories/">åˆ†ç±»</a></li>
      
        <li><a href="/archives/">å½’æ¡£</a></li>
      
        <li><a href="/links/">å‹é“¾</a></li>
      
        <li><a href="/reward/">èµåŠ©</a></li>
      
        <li><a href="/atom.xml">è®¢é˜…</a></li>
      
        <li><a target="_blank" rel="noopener" href="//stellar.loli.fj.cn">ä¸»é¢˜</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>ã€ç¬”è®°ã€‘SpringBootå®ç°AOP</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2020/10/17/SpringBootå®ç°AOP/" rel="bookmark">
        <time class="entry-date published" datetime="2020-10-17T09:24:56.000Z">
          2020-10-17
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨SpringBooté¡¹ç›®ä¸­åŸºäºAspectJæ¡†æ¶å®ç°çš„AOPå­¦ä¹ ç¬”è®°</p>
<span id="more"></span>

<h2 id="AOPä»‹ç»"><a href="#AOPä»‹ç»" class="headerlink" title="AOPä»‹ç»"></a>AOPä»‹ç»</h2><ul>
<li>é¢å‘åˆ‡é¢çš„ç¨‹åºè®¾è®¡ï¼ˆAspect-oriented programmingï¼ŒAOPï¼Œåˆè¯‘ä½œé¢å‘æ–¹é¢çš„ç¨‹åºè®¾è®¡ã€å‰–é¢å¯¼å‘ç¨‹åºè®¾è®¡ï¼‰æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­çš„ä¸€ç§ç¨‹åºè®¾è®¡æ€æƒ³ï¼Œæ—¨åœ¨å°†æ¨ªåˆ‡å…³æ³¨ç‚¹ä¸ä¸šåŠ¡ä¸»ä½“è¿›è¡Œè¿›ä¸€æ­¥åˆ†ç¦»ï¼Œä»¥æé«˜ç¨‹åºä»£ç çš„æ¨¡å—åŒ–ç¨‹åº¦ã€‚é€šè¿‡åœ¨ç°æœ‰ä»£ç åŸºç¡€ä¸Šå¢åŠ é¢å¤–çš„é€šçŸ¥ï¼ˆAdviceï¼‰æœºåˆ¶ï¼Œèƒ½å¤Ÿå¯¹è¢«å£°æ˜ä¸ºâ€œåˆ‡ç‚¹ï¼ˆPointcutï¼‰â€çš„ä»£ç å—è¿›è¡Œç»Ÿä¸€ç®¡ç†ä¸è£…é¥°ï¼Œå¦‚â€œå¯¹æ‰€æœ‰æ–¹æ³•åä»¥â€˜set*â€™å¼€å¤´çš„æ–¹æ³•æ·»åŠ åå°æ—¥å¿—â€ã€‚è¯¥æ€æƒ³ä½¿å¾—å¼€å‘äººå‘˜èƒ½å¤Ÿå°†ä¸ä»£ç æ ¸å¿ƒä¸šåŠ¡é€»è¾‘å…³ç³»ä¸é‚£ä¹ˆå¯†åˆ‡çš„åŠŸèƒ½ï¼ˆå¦‚æ—¥å¿—åŠŸèƒ½ï¼‰æ·»åŠ è‡³ç¨‹åºä¸­ï¼ŒåŒæ—¶åˆä¸é™ä½ä¸šåŠ¡ä»£ç çš„å¯è¯»æ€§ã€‚é¢å‘åˆ‡é¢çš„ç¨‹åºè®¾è®¡æ€æƒ³ä¹Ÿæ˜¯é¢å‘åˆ‡é¢è½¯ä»¶å¼€å‘çš„åŸºç¡€ã€‚ï¼ˆ<a href="/302.html?target=https://zh.wikipedia.org/wiki/%E9%9D%A2%E5%90%91%E5%88%87%E9%9D%A2%E7%9A%84%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1">ç»´åŸºç™¾ç§‘</a>ï¼‰</li>
</ul>
<h2 id="ä»£ç†æ–¹å¼ä¸é…ç½®"><a href="#ä»£ç†æ–¹å¼ä¸é…ç½®" class="headerlink" title="ä»£ç†æ–¹å¼ä¸é…ç½®"></a>ä»£ç†æ–¹å¼ä¸é…ç½®</h2><ul>
<li><p>åœ¨SpringBooté¡¹ç›®ä¸­æœ‰ä¸¤ç§ä»£ç†å¯¹è±¡å¯ä»¥å®ç°AOPï¼Œä¸€ä¸ªæ˜¯JDKä»£ç†ï¼Œä¸€ä¸ªæ˜¯CGLIBä»£ç†</p>
</li>
<li><p>CGLIBä»£ç†ä¸ºSpringAOPçš„é»˜è®¤ä»£ç†å¯¹è±¡ï¼Œå®ƒçš„åŸç†æ˜¯ä¸ºç›®æ ‡æ–¹æ³•æ‰€åœ¨çš„ç±»å®ç°ä¸€ä¸ªå­ç±»ï¼Œé€šè¿‡ç»§æ‰¿å…³ç³»å®ç°AOP</p>
</li>
<li><p>JDKä»£ç†çš„åŸç†æ˜¯ä¸ºç›®æ ‡æ–¹æ³•æ‰€åœ¨çš„ç±»å®ç°ä¸€ä¸ªå…„å¼Ÿç±»ï¼ˆä¹Ÿå°±æ˜¯è¯´ç›®æ ‡æ–¹æ³•æ‰€åœ¨çš„ç±»å¿…é¡»å‘ç”Ÿäº†ç»§æ‰¿å…³ç³»ï¼Œä¸”ä¸ºå­ç±»ï¼‰ï¼ŒJDKä»£ç†ä¼šå®ç°ä¸ç›®æ ‡æ–¹æ³•æ‰€åœ¨çš„ç±»å¯¹åº”çˆ¶ç±»çš„ç»§æ‰¿å…³ç³»ï¼Œä»è€Œå®ç°AOPï¼Œä½†JDKä»£ç†éœ€è¦ä¿®æ”¹SpringBooté…ç½®æ–‡ä»¶ï¼Œä»¥ymlä¸ºä¾‹</p>
</li>
<li><p>é…ç½®çš„å€¼é»˜è®¤ä¸ºtrueè¡¨ç¤ºCGLIBä»£ç†ï¼Œæ”¹ä¸ºfalseè¡¨ç¤ºJDKä»£ç†</p>
</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.aop.proxy-target-class</span>=<span class="string">false</span></span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">aop:</span></span><br><span class="line">    <span class="attr">proxy-target-class:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h2 id="å®ç°AOP"><a href="#å®ç°AOP" class="headerlink" title="å®ç°AOP"></a>å®ç°AOP</h2><h3 id="å®šä¹‰ä¸€ä¸ªåˆ‡é¢"><a href="#å®šä¹‰ä¸€ä¸ªåˆ‡é¢" class="headerlink" title="å®šä¹‰ä¸€ä¸ªåˆ‡é¢"></a>å®šä¹‰ä¸€ä¸ªåˆ‡é¢</h3><ul>
<li>é€šè¿‡@Aspectå®šä¹‰ä¸€ä¸ªåˆ‡é¢ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SysLogAspect</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å®šä¹‰åˆ‡é¢çš„ä¼˜å…ˆçº§"><a href="#å®šä¹‰åˆ‡é¢çš„ä¼˜å…ˆçº§" class="headerlink" title="å®šä¹‰åˆ‡é¢çš„ä¼˜å…ˆçº§"></a>å®šä¹‰åˆ‡é¢çš„ä¼˜å…ˆçº§</h4><blockquote>
<p><code>@Order()</code>ï¼šç”¨äºæè¿°åˆ‡é¢ç±»ï¼Œæ•°å­—è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼Œå¯ä»¥æ˜¯è´Ÿæ•°</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Order(1)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SysLogAspect</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="åœ¨åˆ‡é¢ä¸­å®šä¹‰åˆ‡å…¥ç‚¹"><a href="#åœ¨åˆ‡é¢ä¸­å®šä¹‰åˆ‡å…¥ç‚¹" class="headerlink" title="åœ¨åˆ‡é¢ä¸­å®šä¹‰åˆ‡å…¥ç‚¹"></a>åœ¨åˆ‡é¢ä¸­å®šä¹‰åˆ‡å…¥ç‚¹</h3><h4 id="é€šè¿‡æ³¨è§£çš„æ–¹å¼å®šä¹‰åˆ‡å…¥ç‚¹"><a href="#é€šè¿‡æ³¨è§£çš„æ–¹å¼å®šä¹‰åˆ‡å…¥ç‚¹" class="headerlink" title="é€šè¿‡æ³¨è§£çš„æ–¹å¼å®šä¹‰åˆ‡å…¥ç‚¹"></a>é€šè¿‡æ³¨è§£çš„æ–¹å¼å®šä¹‰åˆ‡å…¥ç‚¹</h4><ul>
<li><p>é€šè¿‡åŒ¹é…æœ‰æŒ‡å®šè‡ªå®šä¹‰æ³¨è§£æè¿°çš„æ–¹æ³•ï¼Œå®ç°ç»†ç²’åº¦çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼å®šä¹‰</p>
</li>
<li><p>é¦–å…ˆå®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰æ³¨è§£</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(ElementType.METHOD)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> RequiredLog &#123;</span><br><span class="line">    String <span class="title function_">value</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>&lt;package&gt;.&lt;required&gt;</code>ï¼šæ³¨è§£çš„å…¨å±€é™å®šå<br><code>doLog()</code>ï¼šè¯¥æ–¹æ³•ä»…ä»…æ˜¯æ³¨è§£çš„ä¸€ä¸ªè½½ä½“ï¼Œæ–¹æ³•ä½“å†…ä¸éœ€è¦å†™ä»»ä½•å†…å®¹</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Pointcut(&quot;@annotation(&lt;package&gt;.&lt;required&gt;)&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doLog</span><span class="params">()</span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¸ºåˆ‡å…¥ç‚¹æ–¹æ³•æ ‡æ³¨è‡ªå®šä¹‰æ³¨è§£</li>
</ul>
<h4 id="é€šè¿‡æŒ‡å®šbeançš„æ–¹å¼å®šä¹‰åˆ‡å…¥ç‚¹"><a href="#é€šè¿‡æŒ‡å®šbeançš„æ–¹å¼å®šä¹‰åˆ‡å…¥ç‚¹" class="headerlink" title="é€šè¿‡æŒ‡å®šbeançš„æ–¹å¼å®šä¹‰åˆ‡å…¥ç‚¹"></a>é€šè¿‡æŒ‡å®šbeançš„æ–¹å¼å®šä¹‰åˆ‡å…¥ç‚¹</h4><ul>
<li>é€šè¿‡beanè¡¨è¾¾å¼ä¸ºSpringä¸­çš„ä¸€ç§ç²—ç²’åº¦çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼Œä¸èƒ½ç²¾ç¡®åˆ°å…·ä½“çš„æ–¹æ³•</li>
</ul>
<blockquote>
<p><code>&lt;bean&gt;</code>ï¼šSpringå®¹å™¨ä¸­ä¸€ä¸ªbeanå¯¹è±¡çš„åå­—</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Pointcut(&quot;bean(&lt;bean&gt;)&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doLog</span><span class="params">()</span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<h5 id="åŒ¹é…æ›´å¤šçš„beanå¯¹è±¡"><a href="#åŒ¹é…æ›´å¤šçš„beanå¯¹è±¡" class="headerlink" title="åŒ¹é…æ›´å¤šçš„beanå¯¹è±¡"></a>åŒ¹é…æ›´å¤šçš„beanå¯¹è±¡</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Pointcut(&quot;bean(*&lt;bean&gt;)&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doLog</span><span class="params">()</span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="é€šè¿‡æŒ‡å®šç±»åçš„æ–¹å¼å®šä¹‰åˆ‡å…¥ç‚¹"><a href="#é€šè¿‡æŒ‡å®šç±»åçš„æ–¹å¼å®šä¹‰åˆ‡å…¥ç‚¹" class="headerlink" title="é€šè¿‡æŒ‡å®šç±»åçš„æ–¹å¼å®šä¹‰åˆ‡å…¥ç‚¹"></a>é€šè¿‡æŒ‡å®šç±»åçš„æ–¹å¼å®šä¹‰åˆ‡å…¥ç‚¹</h4><ul>
<li>é€šè¿‡æŒ‡å®šç±»åçš„æ–¹å¼å®šä¹‰åˆ‡å…¥ç‚¹ï¼Œå®ç°ç²—ç²’åº¦çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼å®šä¹‰</li>
</ul>
<blockquote>
<p><code>&lt;package&gt;.&lt;class&gt;</code>ï¼šç±»çš„å…¨å±€é™å®šå</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Pointcut(&quot;within(&lt;package&gt;.&lt;class&gt;)&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doLog</span><span class="params">()</span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<h5 id="æŒ‡å®šå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•"><a href="#æŒ‡å®šå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•" class="headerlink" title="æŒ‡å®šå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•"></a>æŒ‡å®šå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Pointcut(&quot;within(&lt;package&gt;.*)&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doLog</span><span class="params">()</span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<h5 id="æŒ‡å®šå½“å‰ç›®å½•ä»¥åŠå­ç›®å½•ä¸­ç±»çš„æ‰€æœ‰æ–¹æ³•"><a href="#æŒ‡å®šå½“å‰ç›®å½•ä»¥åŠå­ç›®å½•ä¸­ç±»çš„æ‰€æœ‰æ–¹æ³•" class="headerlink" title="æŒ‡å®šå½“å‰ç›®å½•ä»¥åŠå­ç›®å½•ä¸­ç±»çš„æ‰€æœ‰æ–¹æ³•"></a>æŒ‡å®šå½“å‰ç›®å½•ä»¥åŠå­ç›®å½•ä¸­ç±»çš„æ‰€æœ‰æ–¹æ³•</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Pointcut(&quot;within(&lt;package&gt;..*)&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doLog</span><span class="params">()</span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="é€šè¿‡æŒ‡å®šæ–¹æ³•çš„æ–¹å¼å®šä¹‰åˆ‡å…¥ç‚¹"><a href="#é€šè¿‡æŒ‡å®šæ–¹æ³•çš„æ–¹å¼å®šä¹‰åˆ‡å…¥ç‚¹" class="headerlink" title="é€šè¿‡æŒ‡å®šæ–¹æ³•çš„æ–¹å¼å®šä¹‰åˆ‡å…¥ç‚¹"></a>é€šè¿‡æŒ‡å®šæ–¹æ³•çš„æ–¹å¼å®šä¹‰åˆ‡å…¥ç‚¹</h4><ul>
<li>é€šè¿‡æŒ‡å®šæ–¹æ³•çš„æ–¹å¼å®šä¹‰åˆ‡å…¥ç‚¹ï¼Œå®ç°ç»†ç²’åº¦çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼å®šä¹‰</li>
</ul>
<h5 id="åŒ¹é…æ— å‚æ–¹æ³•"><a href="#åŒ¹é…æ— å‚æ–¹æ³•" class="headerlink" title="åŒ¹é…æ— å‚æ–¹æ³•"></a>åŒ¹é…æ— å‚æ–¹æ³•</h5><blockquote>
<p><code>void</code>ï¼šæ–¹æ³•è¿”å›å€¼ç±»å‹<br><code>&lt;package&gt;.&lt;class&gt;.&lt;method&gt;()</code>ï¼šæ–¹æ³•å…¨å±€é™å®šå</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Pointcut(&quot;execution(void &lt;package&gt;.&lt;class&gt;.&lt;method&gt;())&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doLog</span><span class="params">()</span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<h5 id="åŒ¹é…æœ‰å‚æ–¹æ³•"><a href="#åŒ¹é…æœ‰å‚æ–¹æ³•" class="headerlink" title="åŒ¹é…æœ‰å‚æ–¹æ³•"></a>åŒ¹é…æœ‰å‚æ–¹æ³•</h5><blockquote>
<p><code>String</code>ï¼šå‚æ•°ç±»å‹</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Pointcut(&quot;execution(void &lt;package&gt;.&lt;class&gt;.&lt;method&gt;(String))&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doLog</span><span class="params">()</span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä¸ºåˆ‡å…¥ç‚¹å®šä¹‰é€šçŸ¥æ–¹æ³•"><a href="#ä¸ºåˆ‡å…¥ç‚¹å®šä¹‰é€šçŸ¥æ–¹æ³•" class="headerlink" title="ä¸ºåˆ‡å…¥ç‚¹å®šä¹‰é€šçŸ¥æ–¹æ³•"></a>ä¸ºåˆ‡å…¥ç‚¹å®šä¹‰é€šçŸ¥æ–¹æ³•</h3><h4 id="é€šçŸ¥çš„ç±»å‹"><a href="#é€šçŸ¥çš„ç±»å‹" class="headerlink" title="é€šçŸ¥çš„ç±»å‹"></a>é€šçŸ¥çš„ç±»å‹</h4><blockquote>
<p><code>@Around</code>ï¼šé€šè¿‡è¯¥æ³¨è§£æè¿°çš„æ–¹æ³•å¯ä»¥åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰å’Œä¹‹ååšåŠŸèƒ½æ‰©å±•ï¼Œåœ¨@Aroundæ³¨è§£æè¿°çš„æ–¹æ³•å†…éƒ¨ï¼Œå¯ä»¥æ‰‹åŠ¨è°ƒç”¨ç›®æ ‡æ–¹æ³•</p>
<blockquote>
<p>å¯¹äº<code>@Around</code>æ³¨è§£æè¿°çš„æ–¹æ³•å…¶è§„èŒƒè¦æ±‚ä¸º</p>
<blockquote>
<p>è¿”å›å€¼ç±»å‹ä¸ºï¼šObject<br>å‚æ•°ç±»å‹ä¸ºï¼šProceedingJoinPoint<br>æŠ›å‡ºçš„å¼‚å¸¸ä¸ºï¼šThrowable</p>
</blockquote>
</blockquote>
</blockquote>
<blockquote>
<p><code>@Before</code>ï¼šåœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œ<br><code>@After</code>ï¼šåœ¨ç›®æ ‡æ–¹æ³•ç»“æŸä¹‹åæ‰§è¡Œ<br><code>@AfterReturning</code>ï¼šåœ¨ç›®æ ‡æ–¹æ³•æ­£å¸¸ç»“æŸä¹‹å‰æ‰§è¡Œ<br><code>@AfterThrowing</code>ã€<code>@AfterThrowing(value=&quot;&quot;,throwing=&quot;e&quot;)</code>ï¼šåœ¨ç›®æ ‡æ–¹æ³•å¼‚å¸¸ç»“æŸä¹‹å‰æ‰§è¡Œ</p>
</blockquote>
<h4 id="é€šçŸ¥ç±»å‹çš„é¡ºåº"><a href="#é€šçŸ¥ç±»å‹çš„é¡ºåº" class="headerlink" title="é€šçŸ¥ç±»å‹çš„é¡ºåº"></a>é€šçŸ¥ç±»å‹çš„é¡ºåº</h4><blockquote>
<p><code>æ­£å¸¸æ‰§è¡Œé¡ºåº</code>ï¼š<code>@Around.before</code>-&gt;<code>@Before</code>-&gt;<code>@Around.after</code>-&gt;<code>@After</code>-&gt;<code>@AfterReturning</code><br><code>å¼‚å¸¸æ‰§è¡Œé¡ºåº</code>ï¼š<code>@Around.before</code>-&gt;<code>@Before</code>-&gt;<code>@Around.error</code>-&gt;<code>@After</code>-&gt;<code>@AfterThrowing</code></p>
</blockquote>
<h4 id="å®šä¹‰é€šçŸ¥æ–¹æ³•"><a href="#å®šä¹‰é€šçŸ¥æ–¹æ³•" class="headerlink" title="å®šä¹‰é€šçŸ¥æ–¹æ³•"></a>å®šä¹‰é€šçŸ¥æ–¹æ³•</h4><h5 id="ç›´æ¥åœ¨adviceå†…éƒ¨å®šä¹‰åˆ‡å…¥ç‚¹è¡¨è¾¾å¼"><a href="#ç›´æ¥åœ¨adviceå†…éƒ¨å®šä¹‰åˆ‡å…¥ç‚¹è¡¨è¾¾å¼" class="headerlink" title="ç›´æ¥åœ¨adviceå†…éƒ¨å®šä¹‰åˆ‡å…¥ç‚¹è¡¨è¾¾å¼"></a>ç›´æ¥åœ¨adviceå†…éƒ¨å®šä¹‰åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Around(&quot;@annotation(com.RequiredLog)&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">doAround</span><span class="params">(ProceedingJoinPoint proceedingJoinPoint)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">    proceedingJoinPoint.proceed();</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="åœ¨adviceå†…éƒ¨é€šè¿‡æ–¹æ³•å¼•ç”¨å®šä¹‰åˆ‡å…¥ç‚¹è¡¨è¾¾å¼"><a href="#åœ¨adviceå†…éƒ¨é€šè¿‡æ–¹æ³•å¼•ç”¨å®šä¹‰åˆ‡å…¥ç‚¹è¡¨è¾¾å¼" class="headerlink" title="åœ¨adviceå†…éƒ¨é€šè¿‡æ–¹æ³•å¼•ç”¨å®šä¹‰åˆ‡å…¥ç‚¹è¡¨è¾¾å¼"></a>åœ¨adviceå†…éƒ¨é€šè¿‡æ–¹æ³•å¼•ç”¨å®šä¹‰åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Around(&quot;doLog()&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">doAround</span><span class="params">(ProceedingJoinPoint proceedingJoinPoint)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">    proceedingJoinPoint.proceed();</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æµ‹è¯•Demo"><a href="#æµ‹è¯•Demo" class="headerlink" title="æµ‹è¯•Demo"></a>æµ‹è¯•Demo</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SysTimeAspect</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;bean(sysUserServiceImpl)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doTime</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before(&quot;doTime()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doBefore</span><span class="params">(JoinPoint jp)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;@Before&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@After(&quot;doTime()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doAfter</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;@After&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@AfterReturning(&quot;doTime()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doAfterReturning</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;@AfterReturning&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@AfterThrowing(&quot;doTime()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doAfterThrowing</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;@AfterThrowing&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Around(&quot;doTime()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">doAround</span><span class="params">(ProceedingJoinPoint jp)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;@Around.before&quot;</span>);</span><br><span class="line">            Object obj=jp.proceed();</span><br><span class="line">            System.out.println(<span class="string">&quot;@Around.after&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> obj;</span><br><span class="line">        &#125; <span class="keyword">catch</span>(Throwable e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;@Around.exception&quot;</span>);</span><br><span class="line">            <span class="keyword">throw</span> e;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;@Around.finally&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å®Œæˆ"><a href="#å®Œæˆ" class="headerlink" title="å®Œæˆ"></a>å®Œæˆ</h2>
      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/Javaåç«¯å­¦ä¹ æŒ‡åŒ—/">Javaåç«¯å­¦ä¹ æŒ‡åŒ—</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/Java/">Java</a><a href="/tags/Spring/">Spring</a><a href="/tags/SpringBoot/">SpringBoot</a><a href="/tags/AOP/">AOP</a>
    </span>
    

    </div>

    
  </div>
</article>

  









    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2024 ç»¯é 
    
  </p>
</footer>
    
    
  </div>
</div>
</body>
</html>