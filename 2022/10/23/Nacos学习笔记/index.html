<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>ã€ç¬”è®°ã€‘Nacoså­¦ä¹ ç¬”è®° | ç»¯é çš„åšå®¢ | è¿èœœç»Ÿæ²»ä¸–ç•Œ!!!ğŸ’•</title>

  
  <meta name="author" content="ç»¯é ">
  

  
  <meta name="description" content="æ•æ‰ä¸€åªçˆ±æŠ˜è…¾çš„ç»¯é ">
  

  
  
  <meta name="keywords" content="Java,Spring,SpringBoot,SpringCloud">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="ã€ç¬”è®°ã€‘Nacoså­¦ä¹ ç¬”è®°"/>

  <meta property="og:site_name" content="ç»¯é çš„åšå®¢"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="ç»¯é çš„åšå®¢" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">ç»¯é çš„åšå®¢</a>
    </h1>
    <p class="site-description">è¿èœœç»Ÿæ²»ä¸–ç•Œ!!!ğŸ’•</p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">ä¸»é¡µ</a></li>
      
        <li><a href="/about/">å…³äº</a></li>
      
        <li><a href="/tags/">æ ‡ç­¾</a></li>
      
        <li><a href="/categories/">åˆ†ç±»</a></li>
      
        <li><a href="/archives/">å½’æ¡£</a></li>
      
        <li><a href="/links/">å‹é“¾</a></li>
      
        <li><a href="/reward/">èµåŠ©</a></li>
      
        <li><a href="/atom.xml">è®¢é˜…</a></li>
      
        <li><a target="_blank" rel="noopener" href="//stellar.loli.fj.cn">ä¸»é¢˜</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>ã€ç¬”è®°ã€‘Nacoså­¦ä¹ ç¬”è®°</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2022/10/23/Nacoså­¦ä¹ ç¬”è®°/" rel="bookmark">
        <time class="entry-date published" datetime="2022-10-23T07:28:45.000Z">
          2022-10-23
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>Nacos (official site: nacos.io) is an easy-to-use platform designed for dynamic service discovery and configuration and service management. It helps you to build cloud native applications and microservices platform easily.ï¼ˆ<a href="/302.html?target=https://github.com/alibaba/nacos/">Github</a>ï¼‰</p>
<span id="more"></span>

<h2 id="éƒ¨ç½²NacosæœåŠ¡ç«¯"><a href="#éƒ¨ç½²NacosæœåŠ¡ç«¯" class="headerlink" title="éƒ¨ç½²NacosæœåŠ¡ç«¯"></a>éƒ¨ç½²NacosæœåŠ¡ç«¯</h2><h3 id="Nacosé¡¹ç›®ä¸‹è½½"><a href="#Nacosé¡¹ç›®ä¸‹è½½" class="headerlink" title="Nacosé¡¹ç›®ä¸‹è½½"></a>Nacosé¡¹ç›®ä¸‹è½½</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/alibaba/nacos/releases/download/1.4.4/nacos-server-1.4.4.tar.gz</span><br><span class="line">tar -xzvf nacos-server-2.1.2.tar.gz -C .</span><br><span class="line">cd nacos</span><br></pre></td></tr></table></figure>

<h3 id="å¯åŠ¨NacosæœåŠ¡"><a href="#å¯åŠ¨NacosæœåŠ¡" class="headerlink" title="å¯åŠ¨NacosæœåŠ¡"></a>å¯åŠ¨NacosæœåŠ¡</h3><ul>
<li>é»˜è®¤å ç”¨8848ç«¯å£</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh bin/startup.sh -m standalone</span><br></pre></td></tr></table></figure>

<h3 id="è®¿é—®ç®¡ç†é¡µé¢"><a href="#è®¿é—®ç®¡ç†é¡µé¢" class="headerlink" title="è®¿é—®ç®¡ç†é¡µé¢"></a>è®¿é—®ç®¡ç†é¡µé¢</h3><ul>
<li><a target="_blank" rel="noopener" href="http://127.0.0.1:8848/nacos">http://127.0.0.1:8848/nacos</a></li>
</ul>
<blockquote>
<p>ç”¨æˆ·åï¼š<code>nacos</code><br>å¯†ç ï¼š<code>nacos</code></p>
</blockquote>
<h3 id="å®Œæˆ"><a href="#å®Œæˆ" class="headerlink" title="å®Œæˆ"></a>å®Œæˆ</h3><p><img src="/images/20221023152845/01.webp"></p>
<h2 id="çˆ¶çº§ä¾èµ–"><a href="#çˆ¶çº§ä¾èµ–" class="headerlink" title="çˆ¶çº§ä¾èµ–"></a>çˆ¶çº§ä¾èµ–</h2><ul>
<li>é€šè¿‡çˆ¶çº§ä¾èµ–ç»Ÿä¸€æ§åˆ¶å­çº§ä¾èµ–çš„ç‰ˆæœ¬</li>
</ul>
<figure class="highlight xml"><figcaption><span>pom.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Nacoså®¢æˆ·ç«¯ä½¿ç”¨"><a href="#Nacoså®¢æˆ·ç«¯ä½¿ç”¨" class="headerlink" title="Nacoså®¢æˆ·ç«¯ä½¿ç”¨"></a>Nacoså®¢æˆ·ç«¯ä½¿ç”¨</h2><h3 id="æ·»åŠ ä¾èµ–"><a href="#æ·»åŠ ä¾èµ–" class="headerlink" title="æ·»åŠ ä¾èµ–"></a>æ·»åŠ ä¾èµ–</h3><figure class="highlight xml"><figcaption><span>pom.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="ä¿®æ”¹é…ç½®"><a href="#ä¿®æ”¹é…ç½®" class="headerlink" title="ä¿®æ”¹é…ç½®"></a>ä¿®æ”¹é…ç½®</h3><ul>
<li>æ³¨å†ŒæœåŠ¡åˆ°æ³¨å†Œä¸­å¿ƒï¼ŒæŒ‡å®šæœåŠ¡ä¸­å¿ƒçš„åœ°å€</li>
</ul>
<blockquote>
<p><code>spring.application.name</code>ï¼šæŒ‡å®šæœåŠ¡åç§°<br><code>spring.cloud.nacos.server-addr</code>ï¼šæŒ‡å®šNacosæ³¨å†Œä¸­å¿ƒçš„åœ°å€</p>
</blockquote>
<figure class="highlight yaml"><figcaption><span>src/main/resources/application.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">æœåŠ¡åç§°</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="string">http://127.0.0.1:8848</span></span><br></pre></td></tr></table></figure>

<h2 id="é€šè¿‡æœåŠ¡åç§°è®¿é—®æœåŠ¡"><a href="#é€šè¿‡æœåŠ¡åç§°è®¿é—®æœåŠ¡" class="headerlink" title="é€šè¿‡æœåŠ¡åç§°è®¿é—®æœåŠ¡"></a>é€šè¿‡æœåŠ¡åç§°è®¿é—®æœåŠ¡</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;http://eureka-service-user/users/&quot;</span> + order.getUserId();</span><br><span class="line"><span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> restTemplate.getForObject(url, User.class);</span><br></pre></td></tr></table></figure>

<h2 id="Nacosä½œä¸ºæ³¨å†Œä¸­å¿ƒçš„é…ç½®"><a href="#Nacosä½œä¸ºæ³¨å†Œä¸­å¿ƒçš„é…ç½®" class="headerlink" title="Nacosä½œä¸ºæ³¨å†Œä¸­å¿ƒçš„é…ç½®"></a>Nacosä½œä¸ºæ³¨å†Œä¸­å¿ƒçš„é…ç½®</h2><h3 id="è´Ÿè½½å‡è¡¡æ–¹å¼é…ç½®"><a href="#è´Ÿè½½å‡è¡¡æ–¹å¼é…ç½®" class="headerlink" title="è´Ÿè½½å‡è¡¡æ–¹å¼é…ç½®"></a>è´Ÿè½½å‡è¡¡æ–¹å¼é…ç½®</h3><h4 id="è½®è¯¢æ–¹å¼"><a href="#è½®è¯¢æ–¹å¼" class="headerlink" title="è½®è¯¢æ–¹å¼"></a>è½®è¯¢æ–¹å¼</h4><ul>
<li>é»˜è®¤ä¸æ·»åŠ é¢å¤–çš„é…ç½®ï¼Œå°†é‡‡ç”¨è½®è¯¢çš„æ–¹å¼</li>
</ul>
<h4 id="é›†ç¾¤æ–¹å¼"><a href="#é›†ç¾¤æ–¹å¼" class="headerlink" title="é›†ç¾¤æ–¹å¼"></a>é›†ç¾¤æ–¹å¼</h4><ul>
<li>å°†æœåŠ¡æ·»åŠ åˆ°é›†ç¾¤</li>
</ul>
<blockquote>
<p><code>spring.cloud.nacos.discovery.cluster-name</code>ï¼šæŒ‡å®šé›†ç¾¤åç§°ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šé›†ç¾¤ï¼Œé‚£ä¹ˆä¸ºé»˜è®¤é›†ç¾¤ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰é…ç½®é›†ç¾¤<br><code>æœåŠ¡å.ribbon.NFLoadBanlancerRuleClassName</code>ï¼šä¸ºæŒ‡å®šæœåŠ¡é…ç½®è´Ÿè½½å‡è¡¡æ–¹å¼</p>
<blockquote>
<p><code>com.alibaba.cloud.nacos.ribbon.NacosRule</code>ï¼šä¼˜å…ˆé€‰æ‹©é›†ç¾¤å†…çš„å®ä¾‹ï¼Œåœ¨é›†ç¾¤å†…éšæœºé€‰æ‹©å®ä¾‹</p>
</blockquote>
</blockquote>
<figure class="highlight yaml"><figcaption><span>src/main/resources/application.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">cluster-name:</span> <span class="string">é›†ç¾¤å</span></span><br><span class="line"><span class="string">æœåŠ¡å:</span></span><br><span class="line">  <span class="attr">ribbon:</span></span><br><span class="line">    <span class="attr">NFLoadBanlancerRuleClassName:</span> <span class="string">com.alibaba.cloud.nacos.ribbon.NacosRule</span></span><br></pre></td></tr></table></figure>

<h5 id="æƒé‡é…ç½®"><a href="#æƒé‡é…ç½®" class="headerlink" title="æƒé‡é…ç½®"></a>æƒé‡é…ç½®</h5><ul>
<li><p>é€šè¿‡æƒé‡é…ç½®ï¼Œæ”¹å˜åœ¨é›†ç¾¤å†…é€‰æ‹©çš„ä¼˜å…ˆçº§</p>
</li>
<li><p>æƒé‡çš„é…ç½®èŒƒå›´ä¸º[0,1]ï¼Œæƒé‡è¶Šé«˜è¢«è®¿é—®çš„é¢‘ç‡è¶Šé«˜ï¼Œå¦‚æœä¸º0è¡¨ç¤ºå®Œå…¨ä¸ä¼šè¢«è®¿é—®</p>
</li>
<li><p>åœ¨ç®¡ç†é¡µé¢ï¼Œé€‰æ‹©ä¸€ä¸ªæœåŠ¡éœ€è¦é…ç½®çš„æƒé‡ï¼Œç‚¹å‡»<code>è¯¦æƒ…</code></p>
</li>
</ul>
<p><img src="/images/20221023152845/02.webp"></p>
<ul>
<li><code>ç¼–è¾‘</code>-&gt;ä¿®æ”¹æƒé‡-&gt;<code>ç¡®å®š</code></li>
</ul>
<p><img src="/images/20221023152845/03.webp"></p>
<h3 id="ç¯å¢ƒéš”ç¦»"><a href="#ç¯å¢ƒéš”ç¦»" class="headerlink" title="ç¯å¢ƒéš”ç¦»"></a>ç¯å¢ƒéš”ç¦»</h3><ul>
<li>Groupåˆ†ç»„åç§°ï¼šé€šå¸¸ç”¨äºä¸šåŠ¡åŠŸèƒ½ç›¸å…³çš„æœåŠ¡ä½œä¸ºä¸€ç»„ï¼Œé»˜è®¤ä¸é…ç½®ä¸º<code>DEFAULT_GROUP</code>åˆ†ç»„</li>
<li>Namespaceå‘½åç©ºé—´ï¼šé€šå¸¸ç”¨äºå°†å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒã€ç”Ÿäº§ç¯å¢ƒçš„éš”ç¦»ï¼Œé»˜è®¤ä¸é…ç½®ä¸º<code>public</code>å‘½åç©ºé—´<ul>
<li>åœ¨ä¸åŒå‘½åç©ºé—´å†…çš„æœåŠ¡æ— æ³•äº’ç›¸è°ƒç”¨</li>
</ul>
</li>
</ul>
<h4 id="æ–°å»ºå‘½åç©ºé—´"><a href="#æ–°å»ºå‘½åç©ºé—´" class="headerlink" title="æ–°å»ºå‘½åç©ºé—´"></a>æ–°å»ºå‘½åç©ºé—´</h4><ul>
<li><code>å‘½åç©ºé—´</code>-&gt;<code>æ–°å»ºå‘½åç©ºé—´</code>-&gt;å¡«å†™<code>å‘½åç©ºé—´å</code>å’Œ<code>æè¿°</code>ï¼Œå¦‚æœä¸å¡«å†™<code>å‘½åç©ºé—´ID</code>å°†ä¼šè‡ªåŠ¨ç”Ÿæˆ-&gt;<code>ç¡®å®š</code></li>
</ul>
<p><img src="/images/20221023152845/04.webp"></p>
<h4 id="ä¿®æ”¹é…ç½®-1"><a href="#ä¿®æ”¹é…ç½®-1" class="headerlink" title="ä¿®æ”¹é…ç½®"></a>ä¿®æ”¹é…ç½®</h4><ul>
<li>å°†æœåŠ¡æ·»åŠ åˆ°å‘½åç©ºé—´</li>
</ul>
<blockquote>
<p><code>spring.cloud.nacos.discovery.namespace</code>ï¼šæŒ‡å®šå‘½åç©ºé—´å</p>
</blockquote>
<figure class="highlight yaml"><figcaption><span>src/main/resources/application.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">namespace:</span> <span class="string">å‘½åç©ºé—´ID</span></span><br></pre></td></tr></table></figure>

<h3 id="ä¸´æ—¶å®ä¾‹ä¸éä¸´æ—¶å®ä¾‹"><a href="#ä¸´æ—¶å®ä¾‹ä¸éä¸´æ—¶å®ä¾‹" class="headerlink" title="ä¸´æ—¶å®ä¾‹ä¸éä¸´æ—¶å®ä¾‹"></a>ä¸´æ—¶å®ä¾‹ä¸éä¸´æ—¶å®ä¾‹</h3><ul>
<li>åœ¨Nacosä¸­é»˜è®¤åˆ›å»ºçš„éƒ½æ˜¯éä¸´æ—¶å®ä¾‹ï¼Œéä¸´æ—¶å®ä¾‹çš„å¿ƒè·³æ£€æµ‹æ–¹å¼ä¸Eurekaä¸€æ ·ï¼Œéƒ½æ˜¯å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘èµ·å¿ƒè·³ï¼Œå½“æœåŠ¡ç«¯æ¥æ”¶ä¸åˆ°å¿ƒè·³åï¼Œä¼šç«‹å³ä»åˆ—è¡¨ä¸­å‰”é™¤</li>
<li>å¦‚æœå°†å®ä¾‹æ”¹ä¸ºäº†éä¸´æ—¶å®ä¾‹ï¼Œå¿ƒè·³æ£€æµ‹å°†å˜ä¸ºæœåŠ¡ç«¯å‘å®¢æˆ·ç«¯è¯¢é—®çš„æ–¹å¼ï¼Œå½“æ£€æµ‹åˆ°å®¢æˆ·ç«¯æœ‰é—®é¢˜åï¼Œä¸ä¼šç«‹å³ä»åˆ—è¡¨ä¸­å‰”é™¤ï¼Œè€Œæ˜¯å°†å¥åº·çŠ¶æ€æ”¹ä¸ºä¸å¥åº·</li>
<li>Nacosé‡‡ç”¨çš„æ˜¯Pullå’ŒPushçš„ç»“åˆï¼Œå½“å‡ºç°äº†å¼‚å¸¸å®ä¾‹ï¼Œä¼šä¸»åŠ¨å‘Šè¯‰æ¶ˆè´¹è€…å¼‚å¸¸æƒ…å†µ</li>
</ul>
<h4 id="ä¿®æ”¹é…ç½®-2"><a href="#ä¿®æ”¹é…ç½®-2" class="headerlink" title="ä¿®æ”¹é…ç½®"></a>ä¿®æ”¹é…ç½®</h4><blockquote>
<p><code>spring.cloud.nacos.diiscovery.ephemeral</code>ï¼šè®¾ç½®æ˜¯å¦ä¸ºä¸´æ—¶å®ä¾‹</p>
<blockquote>
<p><code>true</code>ï¼šç¼ºçœå€¼ï¼Œä¸´æ—¶å®ä¾‹<br><code>false</code>ï¼šéä¸´æ—¶å®ä¾‹</p>
</blockquote>
</blockquote>
<figure class="highlight yaml"><figcaption><span>src/main/resources/application.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">diiscovery:</span></span><br><span class="line">        <span class="attr">ephemeral:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h2 id="Nacosä½œä¸ºé…ç½®ç®¡ç†çš„é…ç½®"><a href="#Nacosä½œä¸ºé…ç½®ç®¡ç†çš„é…ç½®" class="headerlink" title="Nacosä½œä¸ºé…ç½®ç®¡ç†çš„é…ç½®"></a>Nacosä½œä¸ºé…ç½®ç®¡ç†çš„é…ç½®</h2><h3 id="æœåŠ¡ç«¯å‘å¸ƒéœ€è¦æ›´æ–°çš„é…ç½®"><a href="#æœåŠ¡ç«¯å‘å¸ƒéœ€è¦æ›´æ–°çš„é…ç½®" class="headerlink" title="æœåŠ¡ç«¯å‘å¸ƒéœ€è¦æ›´æ–°çš„é…ç½®"></a>æœåŠ¡ç«¯å‘å¸ƒéœ€è¦æ›´æ–°çš„é…ç½®</h3><ul>
<li><code>é…ç½®ç®¡ç†</code>-&gt;<code>é…ç½®åˆ—è¡¨</code>-&gt;<code>+</code></li>
</ul>
<p><img src="/images/20221023152845/05.webp"></p>
<ul>
<li>æŒ‡å®šéœ€è¦æ›´æ–°çš„é…ç½®çš„IDä¸º<code>æœåŠ¡å-ç¯å¢ƒå.yaml</code>-&gt;ä¿®æ”¹<code>é…ç½®æ ¼å¼</code>ä¸º<code>YAML</code>-&gt;åœ¨<code>é…ç½®å†…å®¹</code>ä¸­æ·»åŠ éœ€è¦æ›´æ–°çš„é…ç½®ä¿¡æ¯</li>
</ul>
<p><img src="/images/20221023152845/06.webp"></p>
<h3 id="å®¢æˆ·ç«¯è¯»å–éœ€è¦æ›´æ–°çš„é…ç½®"><a href="#å®¢æˆ·ç«¯è¯»å–éœ€è¦æ›´æ–°çš„é…ç½®" class="headerlink" title="å®¢æˆ·ç«¯è¯»å–éœ€è¦æ›´æ–°çš„é…ç½®"></a>å®¢æˆ·ç«¯è¯»å–éœ€è¦æ›´æ–°çš„é…ç½®</h3><ul>
<li>ä¸ºäº†èƒ½åœ¨é¡¹ç›®å¯åŠ¨åå…ˆè¯»å–Nacosä¸­éœ€è¦æ›´æ–°çš„é…ç½®ï¼Œå†è¯»å–é¡¹ç›®çš„é…ç½®ï¼Œéœ€è¦æŠŠNacosçš„è¿æ¥ä¿¡æ¯é…ç½®åœ¨<code>bootstrap.yml</code>é…ç½®æ–‡ä»¶ä¸­ï¼Œè¿™æ ·åœ¨é¡¹ç›®å¯åŠ¨åï¼Œä¼šå…ˆä»<code>bootstrap.yml</code>é…ç½®æ–‡ä»¶ä¸­è·å–Nacosçš„è¿æ¥ä¿¡æ¯ï¼Œå†è¿æ¥Nacosè·å–éœ€è¦æ›´æ–°çš„é…ç½®ï¼Œæœ€åè¯»å–é¡¹ç›®é…ç½®ï¼Œå®ç°é…ç½®çš„çƒ­æ›´æ–°</li>
</ul>
<h4 id="æ·»åŠ ä¾èµ–-1"><a href="#æ·»åŠ ä¾èµ–-1" class="headerlink" title="æ·»åŠ ä¾èµ–"></a>æ·»åŠ ä¾èµ–</h4><figure class="highlight xml"><figcaption><span>pom.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-config<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="æ·»åŠ é…ç½®"><a href="#æ·»åŠ é…ç½®" class="headerlink" title="æ·»åŠ é…ç½®"></a>æ·»åŠ é…ç½®</h4><ul>
<li>æ–°å»ºä¸€ä¸ª<code>bootstrap.yml</code>é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ æœåŠ¡åç§°ã€å¼€å‘ç¯å¢ƒã€Nacosåœ°å€ã€é…ç½®æ–‡ä»¶ç±»å‹çš„é…ç½®</li>
</ul>
<blockquote>
<p><code>spring.application.name</code>ï¼šæœåŠ¡åç§°<br><code>spring.profiles.active</code>ï¼šç¯å¢ƒåç§°<br><code>spring.cloud.nacos.server-addr</code>ï¼šNacosæœåŠ¡ç«¯åœ°å€<br><code>spring.cloud.nacos.config</code>ï¼šé…ç½®æ–‡ä»¶ç±»å‹</p>
</blockquote>
<figure class="highlight yaml"><figcaption><span>src/main/resources/bootstrap.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="string">http://127.0.0.1:8848</span></span><br><span class="line">      <span class="attr">config:</span></span><br><span class="line">        <span class="attr">file-extension:</span> <span class="string">yaml</span></span><br></pre></td></tr></table></figure>

<h4 id="è·å–æ›´æ–°çš„é…ç½®"><a href="#è·å–æ›´æ–°çš„é…ç½®" class="headerlink" title="è·å–æ›´æ–°çš„é…ç½®"></a>è·å–æ›´æ–°çš„é…ç½®</h4><h5 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h5><h6 id="æ›´æ–°çš„é…ç½®"><a href="#æ›´æ–°çš„é…ç½®" class="headerlink" title="æ›´æ–°çš„é…ç½®"></a>æ›´æ–°çš„é…ç½®</h6><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">myproperties:</span></span><br><span class="line">  <span class="attr">key:</span> <span class="string">value</span></span><br></pre></td></tr></table></figure>

<h5 id="æ–¹å¼ä¸€"><a href="#æ–¹å¼ä¸€" class="headerlink" title="æ–¹å¼ä¸€"></a>æ–¹å¼ä¸€</h5><h6 id="ç›´æ¥ä½¿ç”¨æ›´æ–°çš„é…ç½®"><a href="#ç›´æ¥ä½¿ç”¨æ›´æ–°çš„é…ç½®" class="headerlink" title="ç›´æ¥ä½¿ç”¨æ›´æ–°çš„é…ç½®"></a>ç›´æ¥ä½¿ç”¨æ›´æ–°çš„é…ç½®</h6><ul>
<li>å°†è‡ªå®šä¹‰é…ç½®æ³¨å…¥åˆ°å˜é‡</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Value($&#123;myproperties.key&#125;)</span></span><br><span class="line"><span class="keyword">private</span> String value;</span><br></pre></td></tr></table></figure>

<h6 id="æ·»åŠ çƒ­æ›´æ–°é…ç½®ï¼ˆå¯é€‰ï¼‰"><a href="#æ·»åŠ çƒ­æ›´æ–°é…ç½®ï¼ˆå¯é€‰ï¼‰" class="headerlink" title="æ·»åŠ çƒ­æ›´æ–°é…ç½®ï¼ˆå¯é€‰ï¼‰"></a>æ·»åŠ çƒ­æ›´æ–°é…ç½®ï¼ˆå¯é€‰ï¼‰</h6><ul>
<li>å¾®æœåŠ¡æ— éœ€é‡å¯å°±å¯ä»¥æ„ŸçŸ¥</li>
<li>åœ¨ä¸»å¯åŠ¨ç±»æ·»åŠ <code>@RefreshScope</code>æ³¨è§£</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.context.config.annotation.RefreshScope;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RefreshScope</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.dao&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderDemoApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(OrderDemoApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="æ–¹å¼äºŒ"><a href="#æ–¹å¼äºŒ" class="headerlink" title="æ–¹å¼äºŒ"></a>æ–¹å¼äºŒ</h5><h6 id="ç›´æ¥ä½¿ç”¨æ›´æ–°çš„é…ç½®-1"><a href="#ç›´æ¥ä½¿ç”¨æ›´æ–°çš„é…ç½®-1" class="headerlink" title="ç›´æ¥ä½¿ç”¨æ›´æ–°çš„é…ç½®"></a>ç›´æ¥ä½¿ç”¨æ›´æ–°çš„é…ç½®</h6><ul>
<li>å°†æ•´ä¸ªè‡ªå®šä¹‰é…ç½®æ³¨å…¥åˆ°ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;myproperties&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyProperties</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ³¨å…¥åˆ°å˜é‡</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Value($&#123;myproperties.key&#125;)</span></span><br><span class="line"><span class="keyword">private</span> String value;</span><br></pre></td></tr></table></figure>

<h6 id="æ·»åŠ çƒ­æ›´æ–°é…ç½®ï¼ˆå¯é€‰ï¼‰-1"><a href="#æ·»åŠ çƒ­æ›´æ–°é…ç½®ï¼ˆå¯é€‰ï¼‰-1" class="headerlink" title="æ·»åŠ çƒ­æ›´æ–°é…ç½®ï¼ˆå¯é€‰ï¼‰"></a>æ·»åŠ çƒ­æ›´æ–°é…ç½®ï¼ˆå¯é€‰ï¼‰</h6><ul>
<li>å¾®æœåŠ¡æ— éœ€é‡å¯å°±å¯ä»¥æ„ŸçŸ¥</li>
<li>é€šè¿‡å°†è‡ªå®šä¹‰é…ç½®æ³¨å…¥åˆ°ç±»å¾—åˆ°é…ç½®çš„æ–¹å¼ï¼Œæ— éœ€é¢å¤–é…ç½®å³å¯å®ç°çƒ­æ›´æ–°</li>
</ul>
<h3 id="å¤šç¯å¢ƒé…ç½®å…±äº«"><a href="#å¤šç¯å¢ƒé…ç½®å…±äº«" class="headerlink" title="å¤šç¯å¢ƒé…ç½®å…±äº«"></a>å¤šç¯å¢ƒé…ç½®å…±äº«</h3><ul>
<li><p>åœ¨æ·»åŠ éœ€è¦æ›´æ–°çš„é…ç½®æ—¶ï¼Œé…ç½®IDä¸æŒ‡å®šç¯å¢ƒåï¼Œé»˜è®¤ä¼šå°†æ‰€æœ‰ç¯å¢ƒçš„é…ç½®éƒ½æ›´æ–°</p>
</li>
<li><p><code>é…ç½®ç®¡ç†</code>-&gt;<code>é…ç½®åˆ—è¡¨</code>-&gt;<code>+</code></p>
</li>
</ul>
<p><img src="/images/20221023152845/05.webp"></p>
<ul>
<li>æŒ‡å®šéœ€è¦æ›´æ–°çš„é…ç½®çš„IDä¸º<code>æœåŠ¡å.yaml</code>-&gt;ä¿®æ”¹<code>é…ç½®æ ¼å¼</code>ä¸º<code>YAML</code>-&gt;åœ¨<code>é…ç½®å†…å®¹</code>ä¸­æ·»åŠ éœ€è¦æ›´æ–°çš„é…ç½®ä¿¡æ¯</li>
</ul>
<p><img src="/images/20221023152845/07.webp"></p>
<h4 id="å¤šç¯å¢ƒé…ç½®çš„ä¼˜å…ˆçº§"><a href="#å¤šç¯å¢ƒé…ç½®çš„ä¼˜å…ˆçº§" class="headerlink" title="å¤šç¯å¢ƒé…ç½®çš„ä¼˜å…ˆçº§"></a>å¤šç¯å¢ƒé…ç½®çš„ä¼˜å…ˆçº§</h4><ul>
<li>è¿œç«¯<code>æœåŠ¡å-ç¯å¢ƒå.yml</code>&gt;è¿œç«¯<code>æœåŠ¡å.yml</code>&gt;æœ¬åœ°<code>application.yml</code></li>
</ul>
<h2 id="è¸©å‘"><a href="#è¸©å‘" class="headerlink" title="è¸©å‘"></a>è¸©å‘</h2><ul>
<li>å¯åŠ¨å¤±è´¥ï¼ŒæŠ¥é”™ï¼š<code>Consider renaming one of the beans or enabling overriding by setting spring.main.allow-bean-definition-overriding=true</code></li>
</ul>
<h3 id="è§£å†³é—®é¢˜"><a href="#è§£å†³é—®é¢˜" class="headerlink" title="è§£å†³é—®é¢˜"></a>è§£å†³é—®é¢˜</h3><ul>
<li>æ·»åŠ é…ç½®ï¼Œå½“å‡ºç°ç›¸åŒåå­—çš„ç±»è¿›è¡Œæ³¨å†Œæ—¶ï¼Œå‡†è®¸è¦†ç›–æ³¨å†Œ</li>
</ul>
<figure class="highlight yaml"><figcaption><span>src/main/resources/application.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">main:</span></span><br><span class="line">    <span class="attr">allow-bean-definition-overriding:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h2 id="è¸©å‘-1"><a href="#è¸©å‘-1" class="headerlink" title="è¸©å‘"></a>è¸©å‘</h2><ul>
<li>å¯åŠ¨å¤±è´¥ï¼šæŠ¥é”™<code>Consider defining a bean of type &#39;com.netflix.client.config.IClientConfig&#39; in your configuration.</code></li>
</ul>
<h3 id="è§£å†³é—®é¢˜-1"><a href="#è§£å†³é—®é¢˜-1" class="headerlink" title="è§£å†³é—®é¢˜"></a>è§£å†³é—®é¢˜</h3><ul>
<li>æ·»åŠ Bean</li>
</ul>
<figure class="highlight java"><figcaption><span>src/main/java/conf/MyConfig.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.conf;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.netflix.client.config.DefaultClientConfigImpl;</span><br><span class="line"><span class="keyword">import</span> com.netflix.client.config.IClientConfig;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringBootConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyConfig</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> IClientConfig <span class="title function_">iClientConfig</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">DefaultClientConfigImpl</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å®Œæˆ-1"><a href="#å®Œæˆ-1" class="headerlink" title="å®Œæˆ"></a>å®Œæˆ</h2><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1LQ4y127n4/">å“”å“©å“”å“©â€”â€”é»‘é©¬ç¨‹åºå‘˜</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_51426680/article/details/112545428">CSDNâ€”â€”ä»»æ’ç”Ÿ</a></p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/Javaåç«¯å­¦ä¹ æŒ‡åŒ—/">Javaåç«¯å­¦ä¹ æŒ‡åŒ—</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/Java/">Java</a><a href="/tags/Spring/">Spring</a><a href="/tags/SpringBoot/">SpringBoot</a><a href="/tags/SpringCloud/">SpringCloud</a>
    </span>
    

    </div>

    
  </div>
</article>

  









    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2024 ç»¯é 
    
  </p>
</footer>
    
    
  </div>
</div>
</body>
</html>